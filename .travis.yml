sudo: required
language: java
services:
- docker
before_install:
- openssl aes-256-cbc -K $encrypted_bfaeaa986b9d_key -iv $encrypted_bfaeaa986b9d_iv -in travis/helseci2018-11-15.private.key.enc -out key -d
- git clone https://github.com/navikt/github-apps-support.git
- export PATH=`pwd`/github-apps-support/bin:$PATH
- export INSTALLATION_TOKEN=$(generate-installation-token.sh `generate-jwt.sh ./travis/helseci2018-11-15.private.key.pem $GITHUB_APP_ID`)
script:
- make bump-version
- make
after_success:
- echo "$DOCKER_PASSWORD" | docker login --username "$DOCKER_USERNAME" --password-stdin
- git config user.name team-helse[bot]
- git config user.email team-helse[bot]@users.noreply.github.com
- "./travis/deploy.sh"
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  - secure: S+EfiJ6+M1IK6yOGYrCjlIpuBO9NuZLsD/v3+t6pm9Mxv1eGy8ThgQnmTcQX7P220MVB4kqp0a4oB1G3zuzV0nuvnYGwTNqLtYpbUL0uABbBmPdAglCpD8PITE92IQ+Tptq3v1avGV5SlHEn4qXb2s0ReyUONcwsShJO8dj5egmYijvPhu7ldYKUQ3ky+Nw7on9Tz2TAsVrxVrI50Mqp4MMX2JLI8Y5PHXth0a2RhHn8AogPwBx6lAi4UKhqOWk8psEVrcUpGhwmD3EdSp5Hg/CsYwGuGdVxwA9kXgkqjIzS2J4sDcvVnKp/pQ7kgfg0F0n9ADDG5R7BSS2xMWnjLcL01yKhG0oL0tYCNxhu//lIneXKyl13YVzEwkTA4gdDZvGNRHcWHbmwxHVanZDDL/zuqQIf86Cb/rR/wB2PSN52hZy+LemQTMhjBkFg/ZIFiFGTa1/iwviZJUPwXKvjdtxiZlV+crEoW+0Avjy6l2B/MhvyucNGkE3ISixhaA57RmU+j3WmfWkPjKRhNrfG4aDW4BhoTNtL2q3OJKmL0ZGcBu05N7em08oQu8pSvVRz65m0SF/NHTL7oNt1ouC7x9bR0C8Vufz/i281zlR0EHkF+u4TMH8ZSDGNLAhEroNG/li4jN5e6yjJqpGq7Z2YxKM3Hta5RaQt3/mf06UIVCw=
  - secure: NaTHYMfiJhQoU8511heaH8Rf4/rxXgKfS1LB++9fqDHcPhuAOMekNMU3dapcw/h9xIPIohmVYO9/TgRWCYDXYavHtphHmIUdOW3lsqPnCNIOC21QW/1Tna/drlKdl6S4ioSugeY68598yZWxeXrguedClh9rXZrV/6jjLkQYyNaIdjjkpAZtl6BRmzX9ZY7SdwlIgoCNFfWzduIGil9IlKigMqycW40oKG/NFdtoZ5jWWxMgb78Sy8cGZVHb4dm+RI50sI8N+EIxohKLvDWVDg/Q5nLi8nWOxs9/XHssPLTMBEzsJFgJPWtY7RLIv7qb3uyLon+nrYx6k/GYzXoWRwYN9kfK936u5k15y0pIV7m4mh7t5obZT2yksPFgVriV9lUFmjDKueiEe+i8Jskdz1VI/rN6NpHyt7ulzCxJMqiBaZWJ/+DqGYELsE2liD8f1VpfniDcra0MU+CRainyMLnw4KcI8EPGNVTKd6qoOfn1YP0YO3qHA2BL/oO1JrX0tVNzefzuva/GbTPbWCPVMZe8rvckSJAFSpt5361Kqvo52b/dGDFK+fsxe1KRcDCWEZFI10pti1frkLP85YvNwd/2yPr3eHoyUjiwoMmlE9sAIneD3peNSu0E9vGXqPMnLU+8TvtdvJ8/QazBKaTESTXRvghFwA0y1I+8Ncn7WHU=
  - secure: fLPvvgthHy4dNpRHjwhhKvBZbney6OeyqWXNADdHwVLOLCV9+gMax13vyDgKI3Z11b+Mq1dLRfkx6e2F4gCvoN50hEtyzbyVPzVj2cD6zhuNYZ8LVyIdadW+UUM5H1mtDflAKgJpZ+YfRIjQ/g6SSGWx/xYd56Ocdolmv6Md5xoinTwUgT+TOZA3Ug2msZ+lAc6uGGy1OA5WVDEt4WigyI0wqm4qGTjOUbPzGNLWRx3oF6wthXIwzV/a+J/P0w0X9IJ2ADOeI1dRt44nBaDwgfPWrLp+x5AUnhuZSEoAF8Jm7UUN1HDy47xVJb+yHjJez2xyoyfnWW+kyFygPssMsnTgXqUZmnnzlhLKI5cs2lGGrWgIwWFvyScRI1M6J+yQrIIIC9rUUzYBEyctwEI3JPZr8XF6ixIV0fPTLj5VJQTX7gpFGCXWLRD6t3A/QBVho+xebU424Wl17gNTowS9ZguyIlxncxph3gxbZABDfc2z6ANqw9LNXvfErt7iAYHFPEixVhFz5DDHEe4QDDniD+PtcM3shlf4/HjWxhtLiZuPipxnAc1Gt1vqzvV4PRahoR4rFY2wyjY3k7kdEJ9vAacx8LSuB61qe5AuIrhmyy8HcQ/3EhFbjypuWy+zK8vWB3bwh73mKWLrIxAejU4lDTfdmoNRCL82QfOXD08NHzs=
